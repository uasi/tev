<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>tev</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
  <link rel="stylesheet" href="<%= static_path(@conn, "/css/app.css") %>">
</head>
<body>
  <header class="header">
    <div class="header-menu pure-menu pure-menu-horizontal pure-menu-fixed">
      <a class="pure-menu-heading" href="<%= page_path(@conn, :index) %>">tev</a>
      <ul class="header-menu-list pure-menu-list">
        <% user = assigns[:user] || Map.get(assigns[:view] || %{}, :user) %>
        <%= if user do %>
          <%= if Tev.User.admin?(user) do %>
            <li class="pure-menu-item"><a class="pure-menu-link" href="<%= page_path(@conn, :fetch) %>">Fetch</a></li>
          <% end %>
          <li class="pure-menu-item"><a class="pure-menu-link" href="<%= settings_path(@conn, :account) %>">@<%= user.screen_name %></a></li>
        <% else %>
          <li class="pure-menu-item"><a class="pure-menu-link" href="<%= session_path(@conn, :login) %>">Log in</a></li>
        <% end %>
      </ul>
    </div>
  </header>
  <%= render @view_module, @view_template, assigns %>
</body>
</html>
